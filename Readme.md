## SJTU CS2612, 2025fall, project Parser

语法分析器，根据上下文无关语法生成语法分析器

- 依据输入的上下文无关语法计算 first 集合与 follow 集合

- 依据输入的上下文无关语法生成生成状态转移表

- 基于状态转移表，处理输入终结符序列，输出移入规约过程

其中，本任务默认输入的上下文无关语法中，每一条产生式右侧的符号串都非空；状态转移表
中的每一个节点是扫描线左侧结构 NFA 的节点集合；状态转移表应描述在每个节点上遇到每
个不同终结符（这个符号为此时扫描线右侧的符号）时的动作，这个动作或为移入（此时应指
明移入后的状态节点）或为规约（此时应指明规约所使用的产生式）。本任务中，用于的上下
文无关语法以及状态转移表的数据结构已经在 cfg.h 中提供了

## Usage

1. Windows

- 对于clion用户，在Parser目录下打开项目，右键CMakeLists.txt并选择Reload CMake Project。对于Visual Studio用户，请选择“生成”菜单下的“重新生成解决方案”。对于Vscode用户，请按Ctrl+Shift+P并选择CMake: Configure。

- 运行项目：在clion中，点击右上角的绿色运行按钮。在Visual Studio中，按F5键或点击“调试”菜单下的“开始调试”。在Vscode中，按F5键并选择“C++(GDB/LLDB)”进行调试。

2. Linux

- 在Parser目录下打开终端，执行以下命令：

```bash
mkdir build
cd build
cmake ..
make
./test
```

对于不同的语法，修改test.c中的main函数即可。这里设置了四组不同的语法和对应的转移表。
其中124语法无误，给出了一组合法的example和一组不合法的example；3语法有误。

## 文件说明

- cfg.h: 定义了上下文无关语法的数据结构
- parser_gen.h : 定义了语法分析器生成器的数据结构和接口
- parser_gen.c : 实现了语法分析器生成器的功能
- test.c : 测试代码，包含main函数

## 实现思路

在实现语法分析器生成器时，主要分为以下几个步骤：

- 计算 first 集合和 follow 集合：遍历所有产生式，递归计算每个非终结符的 first 集合。 对于 follow 集合，使用迭代方法，直到所有非终结符的 follow 集合不再变化。
- 构建状态转移表：使用 LR(0) 项目集规范族的方法，构建状态转移表。对于每个状态，计算在遇到不同终结符时的移入和规约动作，并得到处理后的集合状态，判重后加入状态集合构成DFA。
- 对于给定的终结符序列，通过转移表检查是否合法。

注：对于EOF终止符，我们通过将其加入到起始符的follow集合中，然后后续一同推导使用。